"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[250],{3250:function(t,n,e){e.d(n,{Z:function(){return S}});var o=e(5893),r=e(7294),i=e(1163),c=e(4874),a=e.n(c),s=e(6447),u=e(5861),l=e(3321),d=e(7357),f=e(5113),h=e(4175),g=e(474),m=e(5725),v=e.n(m),p=e(7847),b=e(5343),x=e(3800),y=e(3142),j=e(594),w=e(3365);function _(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}function k(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"===typeof t)return _(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A={position:"absolute",overflow:"hidden",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"94vw",height:"94vh",bgcolor:"background.paper",border:"1px solid #000",p:0};function M(t){var n=t.title,e=t.fitWidth,r=t.fitHeight,i=t.setLink,c=t.openModal,a=t.closeModal,d=t.isModal;return(0,o.jsxs)(s.Z,{id:"menu_stack",direction:"row",spacing:2,justifyContent:"space-between",sx:{backgroundColor:"#f5f5f5",zIndex:10},children:[(0,o.jsx)(u.Z,{variant:"h6",p:1,children:n}),(0,o.jsxs)(s.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,o.jsx)(l.Z,{onClick:r,variant:"text",children:(0,o.jsx)(w.Z,{})}),(0,o.jsx)(l.Z,{onClick:e,variant:"text",children:(0,o.jsx)(y.Z,{})}),!d&&(0,o.jsx)(l.Z,{onClick:i,variant:"text",children:(0,o.jsx)(x.Z,{})}),d?(0,o.jsx)(l.Z,{onClick:a,variant:"text",children:(0,o.jsx)(j.Z,{})}):(0,o.jsx)(l.Z,{onClick:c,variant:"text",children:(0,o.jsx)(b.Z,{})})]})]})}function Z(t){var n=t.src,e=t.width,c=void 0===e?600:e,u=t.menu,l=t.openModal,h=t.closeModal,m=t.isModal,b=t.links,x=function(){if(m){var t=document.getElementById("modal_stack"),n=document.getElementById("menu_stack");return[t.clientWidth,t.clientHeight-n.clientHeight]}return[U.current.clientWidth,U.current.clientHeight]},y=function(){var t;(t=g).FitWidth.apply(t,[J,D.current].concat(k(x())))},j=function(){var t;(t=g).FitHeight.apply(t,[J,D.current].concat(k(x())))},w=function(){console.log("stopPZ() panzoomRef.current=".concat(D.current," - isModal:").concat(m)),N.current&&D.current&&(D.current.dispose(),N.current=!1,console.log("pan zoom : disposed - isModal:".concat(m)))},_=function(){var t;(t=g).Fit.apply(t,[J,D.current].concat(k(x()))),b&&g.fetch_json(n.replace(".svg",".json")).then((function(t){g.setup_links(J,t)}));var e=g.get_title(J);if(e&&I(e),!m){var o=R.asPath.split("?");if(2==o.length){var r=g.search_to_query(o[1]);"modal"in r&&r.modal===n&&l()}}if(m){var i=U.current;console.log(i),console.log("box.clientWidth:".concat(i.clientWidth," ; box.clientHeight:").concat(i.clientHeight)),console.log("box.offsetWidth:".concat(i.offsetWidth," ; box.offsetHeight:").concat(i.offsetHeight));var c=i.getBoundingClientRect();console.log("rect.width:".concat(c.width," ; rect.height:").concat(c.height))}},Z=function(){R.push("".concat(R.pathname,"#pz-").concat(n))},S=function(){w()},W=function(){console.log("onLoad : img ".concat(P)),O(!0)},N=(0,r.useRef)(!1),z=(0,r.useState)(Math.round(c/2)),C=z[0],T=z[1],E=(0,r.useState)(n.replace(/\.[^/.]+$/,"")),H=E[0],I=E[1],R=(0,i.useRouter)(),B=n.endsWith(".svg"),P=!B,L=(0,r.useState)(!1),F=L[0],O=L[1],$={minZoom:.1,maxZoom:4},U=(0,r.useRef)(null),q=(0,r.useRef)(null),D=(0,r.useRef)(null),J=m?"modal-".concat(n):n;return(0,r.useEffect)((function(){var t,n=Math.round(c/2);C!=n?T(n):(t=g).Fit.apply(t,[J,D.current].concat(k(x())))}),[C,c]),(0,r.useEffect)((function(){return F&&q.current&&!N.current&&(console.log("startPZ() - isModal:${isModal}"),F&&q.current&&!N.current&&(D.current=a()(q.current,$),N.current=!0,(P||g.get_svg_id(J))&&_()),m||w()),S}),[F]),P&&setTimeout((function(){O(!0)}),0),m?(0,o.jsxs)(s.Z,{id:"modal_stack",p:0,spacing:0,sx:A,direction:"column",children:[u&&(0,o.jsx)(M,{title:H,fitWidth:y,fitHeight:j,setLink:Z,openModal:l,closeModal:h,isModal:!0}),(0,o.jsx)(d.Z,{id:"modal_box",ref:U,sx:{cursor:"grab"},children:(0,o.jsxs)("div",{ref:q,id:"panzoom_div",children:[B&&(0,o.jsx)(p.Z,{src:"".concat(v().basePath,"/").concat(n),id:J,onLoad:W}),P&&(0,o.jsx)("img",{src:"".concat(v().basePath,"/").concat(n),id:J,onLoad:W,draggable:"false"})]})})]}):(0,o.jsx)(d.Z,{m:1,sx:{width:c},children:(0,o.jsx)(f.Z,{elevation:1,sx:{overflow:"hidden"},children:(0,o.jsxs)(s.Z,{id:"pz-".concat(n),children:[u&&(0,o.jsx)(M,{title:H,fitWidth:y,fitHeight:j,setLink:Z,openModal:l,closeModal:h,isModal:!1}),(0,o.jsx)(d.Z,{ref:U,sx:{height:C,position:"relative",userSelect:"none"},children:(0,o.jsxs)("div",{ref:q,id:"panzoom_div",children:[B&&(0,o.jsx)("object",{type:"image/svg+xml",data:"".concat(v().basePath,"/").concat(n),id:J,onLoad:W}),P&&(0,o.jsx)("img",{src:"".concat(v().basePath,"/").concat(n),id:J,onLoad:W,draggable:"false"})]})})]})})})}function S(t){var n=t.src,e=t.width,c=void 0===e?600:e,a=t.links,s=function(){var t="".concat(f.pathname,"#pz-").concat(n);f.push(t,t,{scroll:!1}),d(!1)},u=(0,r.useState)(!1),l=u[0],d=u[1],f=(0,i.useRouter)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Z,{src:n,width:c,links:a,openModal:function(){l||(f.push("".concat(f.pathname,"#pz-").concat(n,"?modal=").concat(n)),d(!0))},menu:!0,isModal:!1}),(0,o.jsx)(h.Z,{id:"modal",open:l,onClose:s,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,o.jsx)("div",{id:"modal_div",children:(0,o.jsx)(Z,{src:n,links:a,closeModal:s,menu:!0,isModal:!0})})})]})}},474:function(t,n,e){e.r(n),e.d(n,{Fit:function(){return w},Top:function(){return _},softReset:function(){return p},Reset:function(){return b},Center:function(){return x},FitHeight:function(){return y},FitWidth:function(){return j},setup_links:function(){return M},flash_links:function(){return Z},get_svg_id:function(){return m},get_title:function(){return S},fetch_json:function(){return k},search_to_query:function(){return g}});var o=e(4051),r=e.n(o),i=e(4874),c=e.n(i),a=e(5500),s=e(5725),u=e.n(s);function l(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}function d(t,n,e,o,r,i,c){try{var a=t[i](c),s=a.value}catch(u){return void e(u)}a.done?n(s):Promise.resolve(s).then(o,r)}function f(t){return function(){var n=this,e=arguments;return new Promise((function(o,r){var i=t.apply(n,e);function c(t){d(i,o,r,c,a,"next",t)}function a(t){d(i,o,r,c,a,"throw",t)}c(void 0)}))}}function h(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"===typeof t)return l(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return l(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t){return JSON.parse('{"'+decodeURI(t.replace(/&/g,'","').replace(/=/g,'":"'))+'"}')}function m(t){var n=document.getElementById(t);return n?"OBJECT"==n.tagName?document.getElementById(t).contentDocument.getElementsByTagName("svg")[0]:"svg"==n.tagName?n:void 0:null}function v(t){if(t.endsWith(".svg")){var n=m(t).getBBox();return{img_width:n.width,img_height:n.height}}var e=function(t){var n=document.getElementById(t);return n?"IMG"==n.tagName?n:void 0:null}(t);return{img_width:e.naturalWidth,img_height:e.naturalHeight}}function p(t){t&&(t.zoomAbs(0,0,1),t.moveTo(0,0))}function b(t,n,e){return t?(t.dispose(),c()(n,e)):null}function x(t,n,e,o){if(!n)return null;p(n);var r=m(t),i=v(t),c=i.img_width,a=i.img_height,s=e/c;if(t.endsWith(".svg")&&r.hasAttributeNS(null,"width")){var u=r.getAttributeNS(null,"width");u.endsWith("px")&&(u=Number(u.slice(0,-2))),s=u/c}var l=o/2-a*s/2,d=e/2-c*s/2;n.moveTo(d,l),console.log("moveto (".concat(d,",").concat(l,")"))}function y(t,n,e,o){if(n){p(n);var r=v(t),i=r.img_width,c=r.img_height,a=1;if(t.endsWith(".svg")){a=e/i;var s=m(t);if(s.hasAttributeNS(null,"width")){var u=s.getAttributeNS(null,"width");u.endsWith("px")&&(u=Number(u.slice(0,-2))),a=u/i}}var l=o/2-c*a/2,d=e/2-i*a/2;n.moveTo(d,l),console.log("moveTo (".concat(d,",").concat(l,")"));var f=e/2,h=o/2,g=o/(c*a);n.zoomAbs(f,h,g),console.log("zoomAbs (".concat(f,",").concat(h,",").concat(g,")"))}}function j(t,n,e,o){if(n){p(n);var r=v(t),i=r.img_width,c=r.img_height;console.log("pz_width,pz_height : (".concat(e," , ").concat(o,")"));var a=1;if(t.endsWith(".svg")){a=e/i;var s=m(t);if(s.hasAttributeNS(null,"width")){var u=s.getAttributeNS(null,"width");u.endsWith("px")&&(u=Number(u.slice(0,-2))),a=u/i}}console.log("scale = ".concat(a));var l=o/2-c*a/2,d=e/2-i*a/2;n.moveTo(d,l),console.log("moveTo (".concat(d,",").concat(l,")"));var f=e/(i*a),h=e/2,g=o/2;n.zoomAbs(h,g,f),console.log("zoomAbs (".concat(h,", ").concat(g,", ").concat(f,")"))}}function w(t,n,e,o){if(n){var r=v(t);r.img_width/r.img_height>e/o?j(t,n,e,o):y(t,n,e,o)}}function _(t,n,e,o){if(n){p(n);var r=m(t),i=v(t),c=i.img_width,a=(i.img_height,e/c);if(t.endsWith(".svg")&&r.hasAttributeNS(null,"width")){var s=r.getAttributeNS(null,"width");s.endsWith("px")&&(s=Number(s.slice(0,-2))),a=s/c}var u=e/2-c*a/2;n.moveTo(u,0);r.getBoundingClientRect();var l=e/(c*a),d=e/2,f=o/2;n.zoomAbs(d,f,l)}}function k(t){return A.apply(this,arguments)}function A(){return(A=f(r().mark((function t(n){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(u().basePath,"/").concat(n));case 2:return e=t.sent,t.next=5,e.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(t,n){var e=m(t);e&&h((0,a.Wj)(e).find("text")).forEach((function(t){var e=t.node.innerHTML;e in n&&(t.linkTo((function(t){t.to(n[e]).target("_blank")})),t.css({"text-decoration":"underline"}))}))}function Z(t,n){t.forEach((function(t){t.fill({color:"red"}),setTimeout((function(){t.fill({color:"#05236e"})}),n)}))}function S(t){var n=m(t);if(!n)return"";var e="",o=h((0,a.Wj)(n).find("title"));return o.length>0&&(e=o[0].node.innerHTML),e}},5725:function(t){t.exports={webpack:function(t){return t.module.rules.push({test:/\.svg$/,use:["@svgr/webpack"]}),t},outDir:"docs",basePath:"/next-svg"}}}]);